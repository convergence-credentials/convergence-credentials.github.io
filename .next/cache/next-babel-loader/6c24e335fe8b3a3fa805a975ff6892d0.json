{"ast":null,"code":"import _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nvar _jsxFileName = \"/home/ajl/development/ssi/academic-creds/convergence-credentials.github.io/src/components/CertificateViewer.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport PropTypes from \"prop-types\";\nimport dynamic from \"next/dynamic\";\nimport { connect } from \"react-redux\";\nimport { getData } from \"@govtechsg/open-attestation\";\nimport CertificateVerifyBlock from \"./CertificateVerifyBlock\";\nimport styles from \"./certificateViewer.scss\";\nimport Modal from \"./Modal\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport DecentralisedRenderer from \"./DecentralisedTemplateRenderer/DecentralisedRenderer\";\nimport MultiTabs from \"./MultiTabs\";\nimport { selectTemplateTab as selectTemplateTabAction } from \"../reducers/certificate\";\nimport { LEGACY_OPENCERTS_RENDERER } from \"../config\";\nconsole.log(styles);\nvar CertificateSharingForm = dynamic(function () {\n  return import(\"./CertificateSharing/CertificateSharingForm\");\n}, {\n  loadableGenerated: {\n    webpack: function webpack() {\n      return [require.resolveWeak(\"./CertificateSharing/CertificateSharingForm\")];\n    },\n    modules: [\"./CertificateSharing/CertificateSharingForm\"]\n  }\n});\n\nvar renderVerifyBlock = function renderVerifyBlock(props) {\n  return __jsx(CertificateVerifyBlock, {\n    verifyTriggered: props.verifyTriggered,\n    verifying: props.verifying,\n    hashStatus: props.hashStatus,\n    issuedStatus: props.issuedStatus,\n    notRevokedStatus: props.notRevokedStatus,\n    issuerIdentityStatus: props.issuerIdentityStatus,\n    toggleDetailedView: props.toggleDetailedView,\n    detailedVerifyVisible: props.detailedVerifyVisible,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 21\n    },\n    __self: this\n  });\n};\n\nvar LoadingIframe = function LoadingIframe() {\n  return __jsx(\"div\", {\n    id: styles[\"renderer-loader\"],\n    className: \"text-blue\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-spinner fa-pulse fa-3x\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"m-3\",\n    style: {\n      fontSize: \"1.5rem\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 36\n    },\n    __self: this\n  }, \"Loading Renderer...\"));\n};\n\nvar linkedinAuth = function linkedinAuth() {\n  var client_id = '86qkwozh6kkok8';\n  var redirect = '';\n  fetch(\"https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=\".concat(client_id, \"&redirect_uri=https%3A%2F%2Fdev.example.com%2Fauth%2Flinkedin%2Fcallback&state=fooobar&scope=r_liteprofile%20r_emailaddress%20w_member_social\")).then(function (res, err) {\n    return console.log(res, err);\n  });\n};\n\nvar renderHeaderBlock = function renderHeaderBlock(props) {\n  var renderedVerifyBlock = renderVerifyBlock(props);\n  return __jsx(\"div\", {\n    className: \"container-fluid \".concat(styles[\"pd-0\"]),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"col-sm-7 col-md-8 col-xs-12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, renderedVerifyBlock), __jsx(\"div\", {\n    className: \"row col-sm-5 col-md-4 col-xs-12 \".concat(styles[\"pd-0\"]),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"ml-auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: \"ml-2\",\n    onClick: function onClick() {\n      return linkedinAuth();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    id: \"btn-linkedin\",\n    className: styles[\"send-btn\"],\n    title: \"Add to LinkedIn\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    \"class\": \"fab fa-linkedin-in\",\n    style: {\n      fontSize: \"1.5rem\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  })))), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    className: \"ml-2\",\n    onClick: function onClick() {\n      return props.handleSharingToggle();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: \"btn-email\",\n    className: styles[\"send-btn\"],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-envelope\",\n    style: {\n      fontSize: \"1.5rem\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }))), __jsx(\"div\", {\n    className: \"ml-2\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, __jsx(\"a\", {\n    download: \"\".concat(props.certificate.id, \".opencert\"),\n    target: \"_black\",\n    href: \"data:text/plain;,\".concat(_JSON$stringify(props.document, null, 2)),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, __jsx(\"button\", {\n    id: \"btn-download\",\n    className: styles[\"send-btn\"],\n    title: \"Download\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, __jsx(\"i\", {\n    className: \"fas fa-file-download\",\n    style: {\n      fontSize: \"1.5rem\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  })))))));\n};\n\nvar CertificateViewer = function CertificateViewer(props) {\n  var document = props.document,\n      selectTemplateTab = props.selectTemplateTab;\n  var certificate = getData(document); // console.log(certificate)\n\n  console.log(certificate.$template.url);\n  var renderedHeaderBlock = renderHeaderBlock(props);\n\n  var validCertificateContent = __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    id: styles[\"top-header-ui\"],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120\n    },\n    __self: this\n  }, __jsx(\"div\", {\n    className: styles[\"header-container\"],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }, renderedHeaderBlock)), __jsx(MultiTabs, {\n    selectTemplateTab: selectTemplateTab,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }), __jsx(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }, __jsx(LoadingIframe, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), __jsx(DecentralisedRenderer, {\n    certificate: document,\n    source: \"\".concat(typeof document.data.$template === \"object\" ? certificate.$template.url : LEGACY_OPENCERTS_RENDERER),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  })), __jsx(Modal, {\n    show: props.showSharing,\n    toggle: props.handleSharingToggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, __jsx(CertificateSharingForm, {\n    emailSendingState: props.emailSendingState,\n    handleSendCertificate: props.handleSendCertificate,\n    handleSharingToggle: props.handleSharingToggle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  })));\n\n  return __jsx(ErrorBoundary, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, validCertificateContent, \" \");\n};\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    selectTemplateTab: function selectTemplateTab(tabIndex) {\n      return dispatch(selectTemplateTabAction(tabIndex));\n    }\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(CertificateViewer);\nCertificateViewer.propTypes = {\n  toggleDetailedView: PropTypes.func,\n  detailedVerifyVisible: PropTypes.bool,\n  document: PropTypes.object,\n  certificate: PropTypes.object,\n  verifying: PropTypes.bool,\n  hashStatus: PropTypes.object,\n  issuedStatus: PropTypes.object,\n  notRevokedStatus: PropTypes.object,\n  issuerIdentityStatus: PropTypes.object,\n  showSharing: PropTypes.bool,\n  emailSendingState: PropTypes.string,\n  handleSharingToggle: PropTypes.func,\n  handleSendCertificate: PropTypes.func,\n  selectTemplateTab: PropTypes.func\n};\nrenderVerifyBlock.propTypes = CertificateViewer.propTypes;\nrenderHeaderBlock.propTypes = CertificateViewer.propTypes;","map":{"version":3,"sources":["/home/ajl/development/ssi/academic-creds/convergence-credentials.github.io/src/components/CertificateViewer.js"],"names":["PropTypes","dynamic","connect","getData","CertificateVerifyBlock","styles","Modal","ErrorBoundary","DecentralisedRenderer","MultiTabs","selectTemplateTab","selectTemplateTabAction","LEGACY_OPENCERTS_RENDERER","console","log","CertificateSharingForm","renderVerifyBlock","props","verifyTriggered","verifying","hashStatus","issuedStatus","notRevokedStatus","issuerIdentityStatus","toggleDetailedView","detailedVerifyVisible","LoadingIframe","fontSize","linkedinAuth","client_id","redirect","fetch","then","res","err","renderHeaderBlock","renderedVerifyBlock","handleSharingToggle","certificate","id","document","CertificateViewer","$template","url","renderedHeaderBlock","validCertificateContent","data","showSharing","emailSendingState","handleSendCertificate","mapDispatchToProps","dispatch","tabIndex","propTypes","func","bool","object","string"],"mappings":"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","sourcesContent":["import PropTypes from \"prop-types\";\nimport dynamic from \"next/dynamic\";\nimport { connect } from \"react-redux\";\nimport { getData } from \"@govtechsg/open-attestation\";\nimport CertificateVerifyBlock from \"./CertificateVerifyBlock\";\nimport styles from \"./certificateViewer.scss\";\nimport Modal from \"./Modal\";\nimport ErrorBoundary from \"./ErrorBoundary\";\nimport DecentralisedRenderer from \"./DecentralisedTemplateRenderer/DecentralisedRenderer\";\nimport MultiTabs from \"./MultiTabs\";\nimport { selectTemplateTab as selectTemplateTabAction } from \"../reducers/certificate\";\nimport { LEGACY_OPENCERTS_RENDERER } from \"../config\";\n\nconsole.log(styles)\n\nconst CertificateSharingForm = dynamic(\n  import(\"./CertificateSharing/CertificateSharingForm\")\n);\n\nconst renderVerifyBlock = props => (\n  <CertificateVerifyBlock\n    verifyTriggered={props.verifyTriggered}\n    verifying={props.verifying}\n    hashStatus={props.hashStatus}\n    issuedStatus={props.issuedStatus}\n    notRevokedStatus={props.notRevokedStatus}\n    issuerIdentityStatus={props.issuerIdentityStatus}\n    toggleDetailedView={props.toggleDetailedView}\n    detailedVerifyVisible={props.detailedVerifyVisible}\n  />\n);\n\nconst LoadingIframe = () => (\n  <div id={styles[\"renderer-loader\"]} className=\"text-blue\">\n    <i className=\"fas fa-spinner fa-pulse fa-3x\" />\n    <div className=\"m-3\" style={{ fontSize: \"1.5rem\" }}>\n      Loading Renderer...\n    </div>\n  </div>\n);\n\nconst linkedinAuth = () => {\n  const client_id = '86qkwozh6kkok8'\n  const redirect = ''\n  \n  fetch(`https://www.linkedin.com/oauth/v2/authorization?response_type=code&client_id=${client_id}&redirect_uri=https%3A%2F%2Fdev.example.com%2Fauth%2Flinkedin%2Fcallback&state=fooobar&scope=r_liteprofile%20r_emailaddress%20w_member_social`)\n  .then((res, err) => console.log(res, err))\n}\n\nconst renderHeaderBlock = props => {\n  const renderedVerifyBlock = renderVerifyBlock(props);\n  return (\n    <div className={`container-fluid ${styles[\"pd-0\"]}`}>\n      <div className=\"row\">\n        <div className=\"col-sm-7 col-md-8 col-xs-12\">{renderedVerifyBlock}</div>\n        <div className={`row col-sm-5 col-md-4 col-xs-12 ${styles[\"pd-0\"]}`}>\n          <div className=\"ml-auto\">\n\n            <div className=\"ml-2\" onClick={() => linkedinAuth()}>\n              <button\n                id=\"btn-linkedin\"\n                className={styles[\"send-btn\"]}\n                title=\"Add to LinkedIn\"\n              >\n                <i \n                  class=\"fab fa-linkedin-in\" \n                  style={{ fontSize: \"1.5rem\" }}\n                />\n              </button>\n            </div>\n          </div>\n          <div />\n          \n          <div className=\"ml-2\" onClick={() => props.handleSharingToggle()}>\n            <div id=\"btn-email\" className={styles[\"send-btn\"]}>\n              <i className=\"fas fa-envelope\" style={{ fontSize: \"1.5rem\" }} />\n            </div>\n          </div>\n\n          <div className=\"ml-2\">\n            <a\n              download={`${props.certificate.id}.opencert`}\n              target=\"_black\"\n              href={`data:text/plain;,${JSON.stringify(\n                props.document,\n                null,\n                2\n              )}`}\n            >\n              <button\n                id=\"btn-download\"\n                className={styles[\"send-btn\"]}\n                title=\"Download\"\n              >\n                <i\n                  className=\"fas fa-file-download\"\n                  style={{ fontSize: \"1.5rem\" }}\n                />\n              </button>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst CertificateViewer = props => {\n  const { document, selectTemplateTab } = props;\n\n  const certificate = getData(document);\n\n  // console.log(certificate)\n  console.log(certificate.$template.url)\n\n  const renderedHeaderBlock = renderHeaderBlock(props);\n\n  const validCertificateContent = (\n    <div>\n      <div id={styles[\"top-header-ui\"]}>\n        <div className={styles[\"header-container\"]}>{renderedHeaderBlock}</div>\n      </div>\n      <MultiTabs selectTemplateTab={selectTemplateTab} />\n      <div>\n        <LoadingIframe />\n        <DecentralisedRenderer\n          certificate={document}\n          source={`${\n            typeof document.data.$template === \"object\"\n              ? certificate.$template.url\n              : LEGACY_OPENCERTS_RENDERER\n          }`}\n        />\n      </div>\n      <Modal show={props.showSharing} toggle={props.handleSharingToggle}>\n        <CertificateSharingForm\n          emailSendingState={props.emailSendingState}\n          handleSendCertificate={props.handleSendCertificate}\n          handleSharingToggle={props.handleSharingToggle}\n        />\n      </Modal>\n    </div>\n  );\n\n  return <ErrorBoundary>{validCertificateContent} </ErrorBoundary>;\n};\n\nconst mapDispatchToProps = dispatch => ({\n  selectTemplateTab: tabIndex => dispatch(selectTemplateTabAction(tabIndex))\n});\n\nexport default connect(\n  null,\n  mapDispatchToProps\n)(CertificateViewer);\n\nCertificateViewer.propTypes = {\n  toggleDetailedView: PropTypes.func,\n  detailedVerifyVisible: PropTypes.bool,\n  document: PropTypes.object,\n  certificate: PropTypes.object,\n  verifying: PropTypes.bool,\n\n  hashStatus: PropTypes.object,\n  issuedStatus: PropTypes.object,\n  notRevokedStatus: PropTypes.object,\n  issuerIdentityStatus: PropTypes.object,\n  showSharing: PropTypes.bool,\n  emailSendingState: PropTypes.string,\n  handleSharingToggle: PropTypes.func,\n  handleSendCertificate: PropTypes.func,\n\n  selectTemplateTab: PropTypes.func\n};\n\nrenderVerifyBlock.propTypes = CertificateViewer.propTypes;\nrenderHeaderBlock.propTypes = CertificateViewer.propTypes;\n"]},"metadata":{},"sourceType":"module"}