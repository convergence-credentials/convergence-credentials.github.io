{"ast":null,"code":"import _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/ajl/development/ssi/academic-creds/convergence-credentials.github.io/src/components/CertificateSharing/CertificateSharingForm.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport { CAPTCHA_CLIENT_KEY } from \"../../config\";\nimport css from \"./sharing.scss\";\nimport { states } from \"../../reducers/certificate\";\n\nvar CertificateSharingForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CertificateSharingForm, _Component);\n\n  function CertificateSharingForm(props) {\n    var _this;\n\n    _classCallCheck(this, CertificateSharingForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CertificateSharingForm).call(this, props));\n    _this.state = {\n      captcha: \"\",\n      email: \"\"\n    };\n    _this.handleCaptchaChange = _this.handleCaptchaChange.bind(_assertThisInitialized(_this));\n    _this.handleEmailChange = _this.handleEmailChange.bind(_assertThisInitialized(_this));\n    _this.handleSend = _this.handleSend.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CertificateSharingForm, [{\n    key: \"handleCaptchaChange\",\n    value: function handleCaptchaChange(value) {\n      this.setState({\n        captcha: value\n      });\n    }\n  }, {\n    key: \"handleEmailChange\",\n    value: function handleEmailChange(event) {\n      this.setState({\n        email: event.target.value\n      });\n    }\n  }, {\n    key: \"handleSend\",\n    value: function handleSend() {\n      var _this$props = this.props,\n          handleSendCertificate = _this$props.handleSendCertificate,\n          emailSendingState = _this$props.emailSendingState;\n\n      if (emailSendingState !== states.PENDING) {\n        handleSendCertificate({\n          email: this.state.email,\n          captcha: this.state.captcha\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var emailSendingState = this.props.emailSendingState;\n      return __jsx(\"div\", {\n        className: \"container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"col-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }), __jsx(\"div\", {\n        className: \"col-8\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 46\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"row d-flex justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 47\n        },\n        __self: this\n      }, __jsx(\"h4\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 48\n        },\n        __self: this\n      }, \"Send your certificate\")), __jsx(\"div\", {\n        className: \"row text-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      }, \"This sends an email with your .opencert attached, and instructions on how to view it.\"), __jsx(\"div\", {\n        className: \"row my-4 d-flex justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54\n        },\n        __self: this\n      }, __jsx(\"input\", {\n        className: \"w-100\",\n        value: this.state.emailAddress,\n        onChange: this.handleEmailChange,\n        placeholder: \"Enter recipient's email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55\n        },\n        __self: this\n      })), __jsx(\"div\", {\n        className: \"row d-flex justify-content-center m-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, __jsx(ReCAPTCHA, {\n        sitekey: CAPTCHA_CLIENT_KEY,\n        onChange: this.handleCaptchaChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      })), emailSendingState === states.SUCCESS ? __jsx(\"div\", {\n        className: \"row my-4 d-flex justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }, \"Email successfully sent!\") : \"\", emailSendingState === states.FAILURE ? __jsx(\"div\", {\n        className: \"row my-4 d-flex justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }, \"An error occured, please check your email and captcha\") : \"\", __jsx(\"div\", {\n        className: \"row d-flex justify-content-center m-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82\n        },\n        __self: this\n      }, __jsx(\"button\", {\n        type: \"button\",\n        className: \"pointer \".concat(css.btn),\n        onClick: this.handleSend,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 83\n        },\n        __self: this\n      }, \"Send\", emailSendingState === states.PENDING ? __jsx(\"i\", {\n        className: \"ml-2 fas fa-spinner fa-pulse\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90\n        },\n        __self: this\n      }) : \"\")))));\n    }\n  }]);\n\n  return CertificateSharingForm;\n}(Component);\n\nCertificateSharingForm.propTypes = {\n  emailSendingState: PropTypes.string,\n  handleSendCertificate: PropTypes.func,\n  handleSharingToggle: PropTypes.func\n};\nexport default CertificateSharingForm;","map":{"version":3,"sources":["/home/ajl/development/ssi/academic-creds/convergence-credentials.github.io/src/components/CertificateSharing/CertificateSharingForm.js"],"names":["React","Component","PropTypes","ReCAPTCHA","CAPTCHA_CLIENT_KEY","css","states","CertificateSharingForm","props","state","captcha","email","handleCaptchaChange","bind","handleEmailChange","handleSend","value","setState","event","target","handleSendCertificate","emailSendingState","PENDING","emailAddress","SUCCESS","FAILURE","btn","propTypes","string","func","handleSharingToggle"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport ReCAPTCHA from \"react-google-recaptcha\";\nimport { CAPTCHA_CLIENT_KEY } from \"../../config\";\nimport css from \"./sharing.scss\";\nimport { states } from \"../../reducers/certificate\";\n\nclass CertificateSharingForm extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      captcha: \"\",\n      email: \"\"\n    };\n\n    this.handleCaptchaChange = this.handleCaptchaChange.bind(this);\n    this.handleEmailChange = this.handleEmailChange.bind(this);\n    this.handleSend = this.handleSend.bind(this);\n  }\n\n  handleCaptchaChange(value) {\n    this.setState({ captcha: value });\n  }\n\n  handleEmailChange(event) {\n    this.setState({ email: event.target.value });\n  }\n\n  handleSend() {\n    const { handleSendCertificate, emailSendingState } = this.props;\n    if (emailSendingState !== states.PENDING) {\n      handleSendCertificate({\n        email: this.state.email,\n        captcha: this.state.captcha\n      });\n    }\n  }\n\n  render() {\n    const { emailSendingState } = this.props;\n    return (\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-2\" />\n          <div className=\"col-8\">\n            <div className=\"row d-flex justify-content-center\">\n              <h4>Send your certificate</h4>\n            </div>\n            <div className=\"row text-center\">\n              This sends an email with your .opencert attached, and instructions\n              on how to view it.\n            </div>\n            <div className=\"row my-4 d-flex justify-content-center\">\n              <input\n                className=\"w-100\"\n                value={this.state.emailAddress}\n                onChange={this.handleEmailChange}\n                placeholder=\"Enter recipient's email\"\n              />\n            </div>\n            <div className=\"row d-flex justify-content-center m-3\">\n              <ReCAPTCHA\n                sitekey={CAPTCHA_CLIENT_KEY}\n                onChange={this.handleCaptchaChange}\n              />\n            </div>\n            {emailSendingState === states.SUCCESS ? (\n              <div className=\"row my-4 d-flex justify-content-center\">\n                Email successfully sent!\n              </div>\n            ) : (\n              \"\"\n            )}\n            {emailSendingState === states.FAILURE ? (\n              <div className=\"row my-4 d-flex justify-content-center\">\n                An error occured, please check your email and captcha\n              </div>\n            ) : (\n              \"\"\n            )}\n            <div className=\"row d-flex justify-content-center m-3\">\n              <button\n                type=\"button\"\n                className={`pointer ${css.btn}`}\n                onClick={this.handleSend}\n              >\n                Send\n                {emailSendingState === states.PENDING ? (\n                  <i className=\"ml-2 fas fa-spinner fa-pulse\" />\n                ) : (\n                  \"\"\n                )}\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nCertificateSharingForm.propTypes = {\n  emailSendingState: PropTypes.string,\n  handleSendCertificate: PropTypes.func,\n  handleSharingToggle: PropTypes.func\n};\n\nexport default CertificateSharingForm;\n"]},"metadata":{},"sourceType":"module"}