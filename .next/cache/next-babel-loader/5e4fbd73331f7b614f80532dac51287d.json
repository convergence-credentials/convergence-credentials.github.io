{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime-corejs2/helpers/esm/toConsumableArray\";\nimport _objectSpread from \"@babel/runtime-corejs2/helpers/esm/objectSpread\";\nexport var states = {\n  INITIAL: \"INITIAL\",\n  PENDING: \"PENDING\",\n  SUCCESS: \"SUCCESS\",\n  FAILURE: \"FAILURE\"\n};\nexport var initialState = {\n  raw: null,\n  rawModified: null,\n  store: null,\n  storeError: null,\n  storeLoading: false,\n  issuerIdentities: null,\n  certificateHash: false,\n  certificateIssued: false,\n  certificateNotRevoked: false,\n  certificateIssuer: false,\n  certificateStore: false,\n  certificateHashVerifying: false,\n  certificateIssuedVerifying: false,\n  certificateNotRevokedVerifying: false,\n  certificateIssuerVerifying: false,\n  certificateStoreVerifying: false,\n  certificateHashError: null,\n  certificateIssuedError: null,\n  certificateNotRevokedError: null,\n  certificateIssuerError: null,\n  certificateStoreError: null,\n  verificationStatus: [],\n  emailState: states.INITIAL,\n  emailError: null,\n  templates: null,\n  activeTemplateTab: 0\n}; // Actions\n\nexport var types = {\n  RESET_CERTIFICATE: \"RESET_CERTIFICATE\",\n  NETWORK_RESET: \"NETWORK_RESET\",\n  // For network change\n  UPDATE_CERTIFICATE: \"UPDATE_CERTIFICATE\",\n  LOADING_STORE_SUCCESS: \"LOADING_STORE_SUCCESS\",\n  LOADING_STORE_FAILURE: \"LOADING_STORE_FAILURE\",\n  VERIFYING_CERTIFICATE: \"VERIFYING_CERTIFICATE\",\n  VERIFYING_CERTIFICATE_HASH_SUCCESS: \"VERIFYING_CERTIFICATE_HASH_SUCCESS\",\n  VERIFYING_CERTIFICATE_HASH_FAILURE: \"VERIFYING_CERTIFICATE_HASH_FAILURE\",\n  VERIFYING_CERTIFICATE_ISSUED_SUCCESS: \"VERIFYING_CERTIFICATE_ISSUED_SUCCESS\",\n  VERIFYING_CERTIFICATE_ISSUED_FAILURE: \"VERIFYING_CERTIFICATE_ISSUED_FAILURE\",\n  VERIFYING_CERTIFICATE_REVOCATION_SUCCESS: \"VERIFYING_CERTIFICATE_REVOCATION_SUCCESS\",\n  VERIFYING_CERTIFICATE_REVOCATION_FAILURE: \"VERIFYING_CERTIFICATE_REVOCATION_FAILURE\",\n  VERIFYING_CERTIFICATE_ISSUER_SUCCESS: \"VERIFYING_CERTIFICATE_ISSUER_SUCCESS\",\n  VERIFYING_CERTIFICATE_ISSUER_FAILURE: \"VERIFYING_CERTIFICATE_ISSUER_FAILURE\",\n  VERIFYING_CERTIFICATE_STORE_SUCCESS: \"VERIFYING_CERTIFICATE_STORE_SUCCESS\",\n  VERIFYING_CERTIFICATE_STORE_FAILURE: \"VERIFYING_CERTIFICATE_STORE_FAILURE\",\n  SENDING_CERTIFICATE: \"SENDING_CERTIFICATE\",\n  SENDING_CERTIFICATE_SUCCESS: \"SENDING_CERTIFICATE_SUCCESS\",\n  SENDING_CERTIFICATE_FAILURE: \"SENDING_CERTIFICATE_FAILURE\",\n  SENDING_CERTIFICATE_RESET: \"SENDING_CERTIFICATE_RESET\",\n  CERTIFICATE_OBFUSCATE_RESET: \"CERTIFICATE_OBFUSCATE_RESET\",\n  CERTIFICATE_OBFUSCATE_UPDATE: \"CERTIFICATE_OBFUSCATE_UPDATE\",\n  CERTIFICATE_TEMPLATE_REGISTER: \"CERTIFICATE_TEMPLATE_REGISTER\",\n  CERTIFICATE_TEMPLATE_SELECT_TAB: \"CERTIFICATE_TEMPLATE_SELECT_TAB\"\n}; // Reducers\n\nexport default function reducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case types.RESET_CERTIFICATE:\n    case types.NETWORK_RESET:\n      return _objectSpread({}, initialState);\n\n    case types.UPDATE_CERTIFICATE:\n      return _objectSpread({}, initialState, {\n        raw: action.payload,\n        rawModified: action.payload,\n        store: null,\n        storeError: null,\n        storeLoading: true\n      });\n\n    case types.LOADING_STORE_SUCCESS:\n      return _objectSpread({}, state, {\n        store: action.payload,\n        storeError: null,\n        storeLoading: false\n      });\n\n    case types.LOADING_STORE_FAILURE:\n      return _objectSpread({}, state, {\n        storeError: action.payload,\n        storeLoading: false\n      });\n\n    case types.VERIFYING_CERTIFICATE:\n      return _objectSpread({}, state, {\n        issuerIdentities: null,\n        certificateHash: false,\n        certificateIssued: false,\n        certificateNotRevoked: false,\n        certificateIssuer: false,\n        certificateStore: false,\n        certificateHashVerifying: true,\n        certificateIssuedVerifying: true,\n        certificateNotRevokedVerifying: true,\n        certificateIssuerVerifying: true,\n        certificateStoreVerifying: true,\n        certificateHashError: null,\n        certificateIssuedError: null,\n        certificateNotRevokedError: null,\n        certificateIssuerError: null,\n        certificateStoreError: null,\n        verificationStatus: []\n      });\n\n    case types.VERIFYING_CERTIFICATE_HASH_SUCCESS:\n      return _objectSpread({}, state, {\n        certificateHash: true,\n        certificateHashError: null,\n        certificateHashVerifying: false,\n        verificationStatus: [].concat(_toConsumableArray(state.verificationStatus), [{\n          message: \"Certificate integrity checked\",\n          warning: false,\n          error: false\n        }])\n      });\n\n    case types.VERIFYING_CERTIFICATE_HASH_FAILURE:\n      return _objectSpread({}, state, {\n        certificateHash: false,\n        certificateHashError: action.payload,\n        certificateHashVerifying: false,\n        verificationStatus: [].concat(_toConsumableArray(state.verificationStatus), [{\n          message: \"Certificate has been tampered\",\n          warning: false,\n          error: true\n        }])\n      });\n\n    case types.VERIFYING_CERTIFICATE_ISSUED_SUCCESS:\n      return _objectSpread({}, state, {\n        certificateIssued: true,\n        certificateIssuedError: null,\n        certificateIssuedVerifying: false,\n        verificationStatus: [].concat(_toConsumableArray(state.verificationStatus), [{\n          message: \"Certificate has been issued\",\n          warning: false,\n          error: false\n        }])\n      });\n\n    case types.VERIFYING_CERTIFICATE_ISSUED_FAILURE:\n      return _objectSpread({}, state, {\n        certificateIssued: false,\n        certificateIssuedError: action.payload,\n        certificateIssuedVerifying: false,\n        verificationStatus: [].concat(_toConsumableArray(state.verificationStatus), [{\n          message: \"Certificate is not issued\",\n          warning: false,\n          error: true\n        }])\n      });\n\n    case types.VERIFYING_CERTIFICATE_REVOCATION_SUCCESS:\n      return _objectSpread({}, state, {\n        certificateNotRevoked: true,\n        certificateNotRevokedError: null,\n        certificateNotRevokedVerifying: false,\n        verificationStatus: [].concat(_toConsumableArray(state.verificationStatus), [{\n          message: \"Certificate is issued\",\n          warning: false,\n          error: false\n        }])\n      });\n\n    case types.VERIFYING_CERTIFICATE_REVOCATION_FAILURE:\n      return _objectSpread({}, state, {\n        certificateNotRevoked: false,\n        certificateNotRevokedError: action.payload,\n        certificateNotRevokedVerifying: false,\n        verificationStatus: [].concat(_toConsumableArray(state.verificationStatus), [{\n          message: \"Certificate has been revoked\",\n          warning: false,\n          error: true\n        }])\n      });\n\n    case types.VERIFYING_CERTIFICATE_ISSUER_SUCCESS:\n      return _objectSpread({}, state, {\n        issuerIdentities: action.payload,\n        certificateIssuer: true,\n        certificateIssuerVerifying: false,\n        certificateIssuerError: null,\n        verificationStatus: [].concat(_toConsumableArray(state.verificationStatus), [{\n          message: \"Known certificate issuer\",\n          warning: false,\n          error: false\n        }])\n      });\n\n    case types.VERIFYING_CERTIFICATE_ISSUER_FAILURE:\n      return _objectSpread({}, state, {\n        certificateIssuer: false,\n        certificateIssuerVerifying: false,\n        certificateIssuerError: action.payload,\n        verificationStatus: [].concat(_toConsumableArray(state.verificationStatus), [{\n          message: \"Unknown certificate issuer\",\n          warning: false,\n          error: false\n        }])\n      });\n\n    case types.VERIFYING_CERTIFICATE_STORE_SUCCESS:\n      return _objectSpread({}, state, {\n        certificateStore: true,\n        certificateStoreError: null,\n        certificateStoreVerifying: false,\n        verificationStatus: [].concat(_toConsumableArray(state.verificationStatus), [{\n          message: \"Certificate store checked\",\n          warning: false,\n          error: false\n        }])\n      });\n\n    case types.VERIFYING_CERTIFICATE_STORE_FAILURE:\n      return _objectSpread({}, state, {\n        certificateStore: false,\n        certificateStoreError: action.payload,\n        certificateStoreVerifying: false,\n        verificationStatus: [].concat(_toConsumableArray(state.verificationStatus), [{\n          message: \"Certificate store does not exist\",\n          warning: false,\n          error: true\n        }])\n      });\n\n    case types.SENDING_CERTIFICATE:\n      return _objectSpread({}, state, {\n        emailState: states.PENDING,\n        emailError: null\n      });\n\n    case types.SENDING_CERTIFICATE_RESET:\n      return _objectSpread({}, state, {\n        emailState: states.INITIAL,\n        emailError: null\n      });\n\n    case types.SENDING_CERTIFICATE_SUCCESS:\n      return _objectSpread({}, state, {\n        emailState: states.SUCCESS,\n        emailError: null\n      });\n\n    case types.SENDING_CERTIFICATE_FAILURE:\n      return _objectSpread({}, state, {\n        emailState: states.FAILURE,\n        emailError: action.payload\n      });\n\n    case types.CERTIFICATE_OBFUSCATE_RESET:\n      return _objectSpread({}, initialState, {\n        rawModified: state.raw\n      });\n\n    case types.CERTIFICATE_OBFUSCATE_UPDATE:\n      return _objectSpread({}, state, {\n        rawModified: action.payload\n      });\n\n    case types.CERTIFICATE_TEMPLATE_REGISTER:\n      return _objectSpread({}, state, {\n        templates: action.payload\n      });\n\n    case types.CERTIFICATE_TEMPLATE_SELECT_TAB:\n      return _objectSpread({}, state, {\n        activeTemplateTab: action.payload\n      });\n\n    default:\n      return state;\n  }\n} // Action Creators\n\nexport function resetCertificateState() {\n  return {\n    type: types.RESET_CERTIFICATE\n  };\n}\nexport function updateCertificate(payload) {\n  return {\n    type: types.UPDATE_CERTIFICATE,\n    payload: payload\n  };\n}\nexport function verifyCertificate(payload) {\n  return {\n    type: types.VERIFYING_CERTIFICATE,\n    payload: payload\n  };\n}\nexport function updateFilteredCertificate(payload) {\n  return {\n    type: types.UPDATE_FILTERED_CERTIFICATE,\n    payload: payload\n  };\n}\nexport function verifyingCertificateIssuerSuccess(_ref) {\n  var issuerIdentities = _ref.issuerIdentities;\n  return {\n    type: types.VERIFYING_CERTIFICATE_ISSUER_SUCCESS,\n    payload: issuerIdentities\n  };\n}\nexport function verifyingCertificateIssuerFailure(_ref2) {\n  var error = _ref2.error;\n  return {\n    type: types.VERIFYING_CERTIFICATE_ISSUER_FAILURE,\n    error: error\n  };\n}\nexport function verifyingCertificateStoreSuccess() {\n  return {\n    type: types.VERIFYING_CERTIFICATE_STORE_SUCCESS\n  };\n}\nexport function verifyingCertificateStoreFailure(_ref3) {\n  var error = _ref3.error;\n  return {\n    type: types.VERIFYING_CERTIFICATE_STORE_FAILURE,\n    error: error\n  };\n}\nexport function verifyingCertificateRevocationSuccess() {\n  return {\n    type: types.VERIFYING_CERTIFICATE_REVOCATION_SUCCESS\n  };\n}\nexport function verifyingCertificateRevocationFailure(_ref4) {\n  var error = _ref4.error;\n  return {\n    type: types.VERIFYING_CERTIFICATE_REVOCATION_FAILURE,\n    error: error\n  };\n}\nexport function verifyingCertificateIssuedSuccess() {\n  return {\n    type: types.VERIFYING_CERTIFICATE_ISSUED_SUCCESS\n  };\n}\nexport function verifyingCertificateIssuedFailure(_ref5) {\n  var error = _ref5.error;\n  return {\n    type: types.VERIFYING_CERTIFICATE_ISSUED_FAILURE,\n    error: error\n  };\n}\nexport function verifyingCertificateHashSuccess() {\n  return {\n    type: types.VERIFYING_CERTIFICATE_HASH_SUCCESS\n  };\n}\nexport function verifyingCertificateHashFailure(_ref6) {\n  var error = _ref6.error;\n  return {\n    type: types.VERIFYING_CERTIFICATE_HASH_FAILURE,\n    error: error\n  };\n}\nexport function sendCertificate(payload) {\n  return {\n    type: types.SENDING_CERTIFICATE,\n    payload: payload\n  };\n}\nexport function sendCertificateReset() {\n  return {\n    type: types.SENDING_CERTIFICATE_RESET\n  };\n}\nexport function resetCertificateObfuscation() {\n  return {\n    type: types.CERTIFICATE_OBFUSCATE_RESET\n  };\n}\nexport function updateObfuscatedCertificate(payload) {\n  return {\n    type: types.CERTIFICATE_OBFUSCATE_UPDATE,\n    payload: payload\n  };\n}\nexport function registerTemplates(payload) {\n  return {\n    type: types.CERTIFICATE_TEMPLATE_REGISTER,\n    payload: payload\n  };\n}\nexport function selectTemplateTab(payload) {\n  return {\n    type: types.CERTIFICATE_TEMPLATE_SELECT_TAB,\n    payload: payload\n  };\n} // Selectors\n\nexport function getIssuerIdentityStatus(store) {\n  var _store$certificate = store.certificate,\n      issuerIdentities = _store$certificate.issuerIdentities,\n      certificateIssuerVerifying = _store$certificate.certificateIssuerVerifying,\n      certificateIssuerError = _store$certificate.certificateIssuerError,\n      certificateIssuer = _store$certificate.certificateIssuer;\n  return {\n    identities: issuerIdentities,\n    verified: certificateIssuer,\n    verifying: certificateIssuerVerifying,\n    error: certificateIssuerError\n  };\n}\nexport function getHashStatus(store) {\n  var _store$certificate2 = store.certificate,\n      certificateHash = _store$certificate2.certificateHash,\n      certificateHashError = _store$certificate2.certificateHashError,\n      certificateHashVerifying = _store$certificate2.certificateHashVerifying;\n  return {\n    verified: certificateHash,\n    verifying: certificateHashVerifying,\n    error: certificateHashError\n  };\n}\nexport function getStoreStatus(store) {\n  var _store$certificate3 = store.certificate,\n      certificateStore = _store$certificate3.certificateStore,\n      certificateStoreError = _store$certificate3.certificateStoreError,\n      certificateStoreVerifying = _store$certificate3.certificateStoreVerifying;\n  return {\n    verified: certificateStore,\n    verifying: certificateStoreVerifying,\n    error: certificateStoreError\n  };\n}\nexport function getIssuedStatus(store) {\n  var _store$certificate4 = store.certificate,\n      certificateIssued = _store$certificate4.certificateIssued,\n      certificateIssuedError = _store$certificate4.certificateIssuedError,\n      certificateIssuedVerifying = _store$certificate4.certificateIssuedVerifying;\n  return {\n    verified: certificateIssued,\n    verifying: certificateIssuedVerifying,\n    error: certificateIssuedError\n  };\n}\nexport function getNotRevokedStatus(store) {\n  var _store$certificate5 = store.certificate,\n      certificateNotRevoked = _store$certificate5.certificateNotRevoked,\n      certificateNotRevokedError = _store$certificate5.certificateNotRevokedError,\n      certificateNotRevokedVerifying = _store$certificate5.certificateNotRevokedVerifying;\n  return {\n    verified: certificateNotRevoked,\n    verifying: certificateNotRevokedVerifying,\n    error: certificateNotRevokedError\n  };\n}\nexport function getCertificate(store) {\n  return store.certificate.rawModified;\n}\nexport function getVerifying(store) {\n  var _store$certificate6 = store.certificate,\n      certificateIssuerVerifying = _store$certificate6.certificateIssuerVerifying,\n      certificateHashVerifying = _store$certificate6.certificateHashVerifying,\n      certificateIssuedVerifying = _store$certificate6.certificateIssuedVerifying,\n      certificateNotRevokedVerifying = _store$certificate6.certificateNotRevokedVerifying,\n      certificateStoreVerifying = _store$certificate6.certificateStoreVerifying;\n  return certificateIssuerVerifying || certificateHashVerifying || certificateIssuedVerifying || certificateNotRevokedVerifying || certificateStoreVerifying;\n}\nexport function getVerified(store) {\n  var hash = getHashStatus(store).verified;\n  var issued = getIssuedStatus(store).verified;\n  var notRevoked = getNotRevokedStatus(store).verified;\n  var identity = getIssuerIdentityStatus(store).verified;\n  var storeStatus = getStoreStatus(store).verified;\n  return hash && issued && notRevoked && identity && storeStatus;\n}\nexport function getVerificationStatus(store) {\n  return store.certificate.verificationStatus;\n}\nexport function getEmailSendingState(store) {\n  return store.certificate.emailState;\n}\nexport function getActiveTemplateTab(store) {\n  return store.certificate.activeTemplateTab;\n}\nexport function getTemplates(store) {\n  return store.certificate.templates;\n}","map":null,"metadata":{},"sourceType":"module"}